<template>
    <div class="page schedule" data-name="schedule" id="schedule">

        <!--Nav bar-->
        <div class="navbar schedule" id="nav1">
            <div class="navbar-inner sliding schedule">
                <div class="left">
                    <div class="fab fab-left-middle color-white profile">
                        <a href="#">
                            <i class="icon material-icons">photo</i>
                        </a>
                    </div>
                </div>
                <div class="right">
                    <div class="fab fab-right-middle color-white search">
                        <a href="#">
                            <i class="icon material-icons">search</i>
                        </a>
                    </div>
                </div>
                <div class="subnavbar schedule">
                    <div class="subnavbar-inner">
                        <div class="toolbar tabbar tabbar-scrollable toolbar-top" id='subnavtoolbar'>
                            <div class="toolbar-inner" id="subnavtoolbar-inner">
                                <!--  <a href="#tab-1" class="tab-link tab-link-active">
                                            <p>04</p>
                                            <p>DEC</p>
                                        </a>
                                        <a href="#tab-2" class="tab-link tab-link-today">
                                            <p>05</p>
                                            <p>DEC</p>
                                        </a>
                                        <a href="#tab-3" class="tab-link">
                                            <p>06</p>
                                            <p>DEC</p>
                                        </a> -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!--tool bar-->
        <div class="toolbar tabbar tabbar-labels toolbar-bottom menu">
            <div class="toolbar-inner">
                <a href="/home" class="tab-link" id='tab1'>
                    <!-- Different icons for iOS and MD themes -->
                    <i class="icon material-icons">home</i>
                </a>
                <a href="/schedule" class="tab-link  tab-link-active" id='tab2'>
                    <i class="icon material-icons">today</i>
                </a>
                <a href="#" class="tab-link">
                </a>
                <a href="#" class="tab-link" id='tab3'>
                    <i class="icon material-icons">monetization_on</i>
                </a>
                <a href="#" class="tab-link" id='tab4'>
                    <i class="icon material-icons">settings</i>
                </a>
            </div>
            <div class="add-circle">
                <a>
                    <img src="/static/images/add_circle_24px.svg" class="dynamic-sheet" alt="">
                </a>
            </div>
        </div>

        <!--tabs-->
        <div class="tabs">
            <div id="14-AGO" class="page-content login-screen-content tab hide-navbar-on-scroll tab-active">
                <div class="list">
                    <ul>
                        <li class="item-divider">
                            <i class="icon material-icons">watch_later</i>
                            00:00 AM
                            <hr>
                        </li>
                        <li>
                            <div class="item-content">
                                <div class="item-inner">
                                    <div class="fab fab-center-center item-fab">
                                        <a href="#">
                                            <i class="icon material-icons">add</i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li class="item-divider">
                            <i class="icon material-icons">watch_later</i>
                            00:30 AM
                            <hr>
                        </li>
                        <li>
                            <div class="row">
                                <div class="card card-expandable" id='cita01'>
                                    <div class="rectangle card-opened-fade-out"></div>
                                    <div class="card-content">

                                        <div class="card-header display-block">

                                            <h6 class="light-blue2 card-opened-fade-out">CONSULTA</h6>
                                            <h3 class="blue card-opened-fade-out">Aglaee Alvarez</h3>
                                            <h5 class="light-blue card-opened-fade-out">Hospital General Zona 2</h5>
                                            <h4 class="purple-blue card-opened-fade-out">
                                                <i class="icon material-icons time">watch_later</i>
                                                12:00PM - 12:30PM
                                            </h4>

                                            <a href="#" class="link card-close card-opened-fade-in color-white">
                                                <i class="icon material-icons white">close</i>
                                                <h3 class="label">CERRAR</h3>
                                            </a>

                                            <div class="row">
                                                <div class="col-5"></div>
                                                <div class="col-90">
                                                    <div class="item-content card-opened-fade-in details-event">
                                                        <div class="fab fab-left-middle color-white photo">
                                                            <a href="#">
                                                                <i class="icon material-icons">photo</i>
                                                            </a>
                                                        </div>
                                                        <ul>
                                                            <li>
                                                                <div class="item-inner">
                                                                    <h2 class="white">Anahi Aglaee Alvarez</h2>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="item-inner">
                                                                    <div
                                                                        class="fab fab-middle color-white contact comment">
                                                                        <a href="#">
                                                                            <i class="icon material-icons">comment</i>
                                                                        </a>
                                                                    </div>
                                                                    <div
                                                                        class="fab fab-middle color-white contact email">
                                                                        <a href="#">
                                                                            <i class="icon material-icons">email</i>
                                                                        </a>
                                                                    </div>
                                                                    <div
                                                                        class="fab fab-middle color-white contact phone">
                                                                        <a href="#">
                                                                            <i
                                                                                class="icon material-icons">local_phone</i>
                                                                        </a>
                                                                    </div>
                                                                    <div class="stars">
                                                                        <i class="icon material-icons"
                                                                            style="left:0px">star</i>
                                                                        <i class="icon material-icons"
                                                                            style="left:20px">star</i>
                                                                        <i class="icon material-icons"
                                                                            style="left:40px">star</i>
                                                                        <i class="icon material-icons"
                                                                            style="left:60px">star</i>
                                                                        <i class="icon material-icons"
                                                                            style="left:80px">star_half</i>
                                                                    </div>
                                                                </div>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>

                                                <div class="col-5"></div>
                                            </div>
                                        </div>

                                        <i class="icon f7-icons chevron card-opened-fade-out">chevron_right</i>
                                        <div class="card-content-padding list">
                                            <ul>
                                                <li>
                                                    <div class="row">
                                                        <div class="col-70">
                                                            <h2 class="blue2">CONSULTA</h2>
                                                        </div>
                                                        <div class="col-30">
                                                            <h2 class="blue2">$500</h2>
                                                        </div>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="row">
                                                        <div class="col-5">
                                                            <i
                                                                class="icon material-icons time light-blue2">watch_later</i>
                                                        </div>
                                                        <div class="col-95">
                                                            <h3 class="light-blue2">12:00PM - 12:30PM</h3>
                                                        </div>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="row">
                                                        <div class="col-60">
                                                            <h3 class="blue2">Centro Hospitalario la Concepci√≥n</h3>
                                                        </div>
                                                        <div class="col-40"></div>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="row">
                                                        <div class="col-55">
                                                        </div>
                                                        <div class="col-45">
                                                            <a href="#" class="item-link list-button login-button">
                                                                <p>Navegar</p>
                                                                <i class="material-icons">directions</i>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li class="item-divider">
                            <i class="icon material-icons">watch_later</i>
                            01:00 AM
                            <hr>
                        </li>
                        <li>
                            <div class="item-content">
                                <div class="item-inner">
                                    <div class="fab fab-center-center item-fab">
                                        <a href="#">
                                            <i class="icon material-icons">add</i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li class="item-divider">
                            <i class="icon material-icons">watch_later</i>
                            1:30 AM
                            <hr>
                        </li>
                        <li>
                            <div class="item-content">
                                <div class="item-inner">
                                    <div class="fab fab-center-center item-fab">
                                        <a href="#">
                                            <i class="icon material-icons">add</i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li class="item-divider">
                            <i class="icon material-icons">watch_later</i>
                            2:00 AM
                            <hr>
                        </li>
                        <li>
                            <div class="item-content">
                                <div class="item-inner">
                                    <div class="fab fab-center-center item-fab">
                                        <a href="#">
                                            <i class="icon material-icons">add</i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li>
                            <br>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- <div id="14-AGO" class="page-content login-screen-content tab hide-navbar-on-scroll tab">
                <p>Quis omnis, quam maiores voluptates vero atque porro? Soluta modi dolore eum dolor
                    iste
                    eos perspiciatis vero porro aliquam officia deleniti, cumque rem, consequatur, ea
                    ipsa
                    temporibus dicta architecto saepe.</p>
                ...
            </div>
            <div id="tab-3" class="page-content login-screen-content tab hide-navbar-on-scroll tab">

            </div>
            <div id="tab-4" class="page-content login-screen-content tab hide-navbar-on-scroll tab">
                <p>Quis omnis, quam maiores voluptates vero atque porro? Soluta modi dolore eum dolor
                    iste
                    eos perspiciatis vero porro aliquam officia deleniti, cumque rem, consequatur, ea
                    ipsa
                    temporibus dicta architecto saepe.</p>...
            </div>
            <div id="tab-5" class="page-content login-screen-content tab hide-navbar-on-scroll tab">

            </div>
            <div id="tab-6" class="page-content login-screen-content tab hide-navbar-on-scroll tab">
                <p>Quis omnis, quam maiores voluptates vero atque porro? Soluta modi dolore eum dolor
                    iste
                    eos perspiciatis vero porro aliquam officia deleniti, cumque rem, consequatur, ea
                    ipsa
                    temporibus dicta architecto saepe.</p>...
            </div>
            <div id="tab-7" class="page-content login-screen-content tab hide-navbar-on-scroll tab">

            </div>
            <div id="tab-8" class="page-content login-screen-content tab hide-navbar-on-scroll tab">
                <p>Quis omnis, quam maiores voluptates vero atque porro? Soluta modi dolore eum dolor
                    iste
                    eos perspiciatis vero porro aliquam officia deleniti, cumque rem, consequatur, ea
                    ipsa
                    temporibus dicta architecto saepe.</p>...
            </div>
            <div id="tab-9" class="page-content login-screen-content tab hide-navbar-on-scroll tab">

            </div> -->
        </div>
    </div>
</template>
<script>
    import $$ from 'dom7';
    export default {
        on: {
            pageInit: function (e, page) {
                var self = this;
                var app = self.$app;
                const monthNames = ["ENE", "FEB", "MAR", "ABR", "MAY", "JUN", "JUL", "AGO", "SEP", "OCT", "NOV", "DIC"];
                var moment = require('moment');
                moment().format();

                app.preloader.show('blue');
                //app.data.store.getItem('doctor').then(function (value) {
                //app.data.doctor = value;
                var z = moment(), today = moment(), y = moment(z).add(1, 'M'), i = 1;
                while (z.isBefore(y)) {
                    $$('#subnavtoolbar-inner').append(
                        '<a href="#tab-' + i + '" class="tab-link" id="' + z.date() + '-' + monthNames[z.month()] + '">' +
                        '<p>' + z.date() + ' </p>' +
                        '<p>' + monthNames[z.month()] + ' </p>' +
                        '</a>');
                    $$('.tabs').append(
                        '<div id="tab-' + i + '" class="page-content login-screen-content tab hide-navbar-on-scroll tab">' +
                        '</div>'
                    );
                    if (z.isSame(today)) {
                        console.log('ahoy');
                        $$('#' + z.date() + '-' + monthNames[z.month()]).addClass('tab-link-active');
                        $$('#' + z.date() + '-' + monthNames[z.month()]).addClass('tab-link-today');
                        $$('#tab-' + i).addClass('tab-active');
                    }
                    i++;
                    z.add(1, 'd')
                }

                app.request.get(app.data.url + '/doctors/' + app.data.doctor.id + '/appointments',
                    function (e) {
                        var x = JSON.parse(e);
                        console.log(x);
                        x.forEach(element => {
                            var date = moment(element.date);
                            console.log(date.format());

                        });
                        app.preloader.hide();
                    });


                //});

                $$(document).on('card:open', function (e) {
                    $$('.subnavbar').hide();
                    $$('.add-circle').hide();
                    $$(e.srcElement).find('.card-header').addClass('header-rect');

                });

                $$(document).on('card:close', function (e) {
                    $$('.subnavbar').show();
                    $$('.add-circle').show();
                    $$(e.srcElement).find('.card-header').removeClass('header-rect');
                });

                $$('.dynamic-sheet').on('click', function () {
                    var dynamicSheet = app.sheet.create({
                        content: '<div class="sheet-modal">' +
                            '<div class="close-sheet">' +
                            '<img src="/static/images/cancel_24px.svg" alt="" class="close">' +
                            '</div>' +
                            '<div class="sheet-modal-inner">' +
                            '<div class="list">' +
                            '<ul>' +
                            '<li>' +
                            '<div class="row">' +
                            '<div class="col">' +
                            '<a href="#" data-view=".view-main" class="item-link list-button login-register-button consultorios">' +
                            '<i class="material-icons">local_hospital</i>' +
                            'Consultorios</a>' +
                            '</div>' +
                            '</div>' +
                            '</li>' +
                            '<li>' +
                            '<div class="row">' +
                            '<div class="col">' +
                            '<a href="#" data-view=".view-main" class="item-link list-button login-register-button asistentes">' +
                            '<i class="material-icons">headset_mic</i>' +
                            'Asistentes</a>' +
                            '</div>' +
                            '</div>' +
                            '</li>' +
                            '<li>' +
                            '<div class="row">' +
                            '<div class="col">' +
                            '<a href="#" data-view=".view-main" class="item-link list-button login-register-button cita">' +
                            '<i class="material-icons">event</i>' +
                            'Nueva cita</a>' +
                            '</div>' +
                            '</div>' +
                            '</li>' +
                            '<li>' +
                            '<div class="row">' +
                            '<div class="col">' +
                            '<a href="#" data-view=".view-main" class="item-link list-button login-register-button paciente">' +
                            '<i class="material-icons">person_add</i>' +
                            'Nuevo Paciente</a>' +
                            '</div>' +
                            '</div>' +
                            '</li>' +
                            '</ul>' +
                            '</div>' +
                            '</div>' +
                            '</div>',
                        on: {
                            open: function (sheet) {
                                console.log('Sheet open');
                            },
                            opened: function (sheet) {
                                $$('.sheet-modal .close').on('click', function () {
                                    dynamicSheet.close();
                                });
                                $$('.sheet-modal .consultorios').click(function () {
                                    dynamicSheet.close();
                                    app.methods.redirectTo('offices-show');
                                });
                                $$('.sheet-modal .asistentes').click(function () {
                                    dynamicSheet.close();
                                    app.methods.redirectTo('asistentes-invitar-01');
                                });
                                $$('.sheet-modal .cita').click(function () {
                                    dynamicSheet.close();
                                    app.methods.redirectTo('agendar-cita');
                                });
                                $$('.sheet-modal .paciente').click(function () {
                                    dynamicSheet.close();
                                    app.methods.redirectTo('nuevo-paciente');
                                });
                            },
                        }
                    });
                    dynamicSheet.open();
                });




            }
        }
    }
</script>